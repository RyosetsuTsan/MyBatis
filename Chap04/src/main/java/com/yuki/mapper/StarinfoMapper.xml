<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--namespaceç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£-->
<mapper namespace="com.yuki.mapper.StarinfoMapper">
    <!--æ¡ä»¶æŸ¥è¯¢ï¼šæŸ¥è¯¢å‡ºæ‰€æœ‰å§“â€œå¼ â€çš„ä¸­å›½æ˜æ˜Ÿä¿¡æ¯--><!--å›ºå®šğŸ§·å†™æ³•-->
    <select id="selectLastNameEqualsZhang" resultType="com.yuki.bean.Starinfo">
        select * from tb_starinfo where username like 'å¼ %' and areaname like '%ä¸­å›½%'
    </select>
    <!--æ¡ä»¶åˆ¤æ–­ï¼šæŸ¥è¯¢å‡ºæ‰€æœ‰å§“ x çš„ x å›½æ˜æ˜Ÿä¿¡æ¯-->
    <!--<select id="selectStarsByNameOrArea" parameterType="com.yuki.bean.Starinfo" resultType="com.yuki.bean.Starinfo">
        select * from tb_starinfo
#       where 1=1  where>æ ‡ç­¾æ›¿ä»£wher 1=1
        <where>
            <if test="username!=null">
                and username like concat('%',#{username},'%')
            </if>
            <if test="areaname!=null">
                and areaname like concat('%',#{areaname},'%')
            </if>
        </where>
    </select>-->
    <select id="selectStarsByNameOrArea" parameterType="com.yuki.bean.Starinfo" resultType="com.yuki.bean.Starinfo">
        select * from tb_starinfo
        <where>
            <choose>
                <when test="username!=null">
                    and username like concat('%',#{username},'%')
                </when>
                <when test="areaname!=null">
                    and areaname like concat('%',#{areaname},'%')
                </when>
                <when test="gender!=null">
                    and gender = #{gender}
                </when>
                <when test="fanscount!=null">
                    and fanscount >= #{fanscount}
                </when>
            </choose>
        </where>
    </select>
    <!--æ¡ä»¶æŸ¥è¯¢ ï¼šæŸ¥è¯¢å‡º userid ä¸º s 1 ã€ s2 ã€ s3 ã€ s4 çš„æ˜æ˜Ÿä¿¡æ¯-->
    <select id="selectStarinfoByUserid" resultType="com.yuki.bean.Starinfo">
        select * from tb_starinfo
        <trim prefix=" where userid in">
            <foreach collection="ids" item="id" index="index" open="(" separator="," close=")">
            #{id}
        </foreach>
        </trim>

    </select>

    <!--æ‰¹é‡åˆ é™¤-->
    <delete id="delete" >
        delete from tb_starinfo where userid in
        <foreach collection="list" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <!--æ‰¹é‡æ·»åŠ -->
    <insert id="insert" parameterType="com.yuki.bean.Starinfo">
        insert into tb_starinfo values
        <foreach collection="stars" item="star" open="(" separator="),(" close=")">
            #{star.userid},
            #{star.username},
            #{star.gender},
            #{star.areaname},
            #{star.fanscount}
        </foreach>
    </insert>
    <!--<insert id="insert" parameterType="java.util.List">
        insert into tb_starinfo
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <choose>
                <when test="userid != null">
                    userid,
                </when>
                <when test="username != null">
                    username,
                </when>
                <when test="gender != null">
                    gender,
                </when>
                <when test="areaname != null">
                    areaname,
                </when>
                <when test="time != null">
                    time,
                </when>
                <when test="fanscount != null">
                    fanscount
                </when>
            </choose>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <choose>
                <when test="userid != null">
                    #{userid},
                </when>
                <when test="username != null">
                    #{username},
                </when>
                <when test="gender != null">
                    #{gender},
                </when>
                <when test="areaname != null">
                    #{areaname},
                </when>
                <when test="time != null">
                    #{time},
                </when>
                <when test="fanscount != null">
                    #{fanscount}
                </when>
            </choose>
        </trim>
    </insert>-->
</mapper>